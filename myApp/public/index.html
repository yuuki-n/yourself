<!DOCTYPE html>
<html lang="jp">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://kit.fontawesome.com/af750d91d7.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="index.css">


  <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-firestore.js"></script>
  <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
  <script src="./config.js"></script>
</head>





<body>
  <header class="header_area">

    <!-- <a class="menu-trigger" href="#">
      <span></span>
      <span></span>
      <span></span>
    </a> -->

    <i class="fas fa-bars bar"></i>


  </header>

  <div class="content">

    <main>
      <!-- <div id="firebaseui-auth-container"></div> -->


      <!-- ロゴ -->
      <div class="logo">
        <svg width="288" height="71" viewBox="0 0 288 71" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M33.928 0C33.8379 0 33.7478 0.0112806 33.6577 0.0112806V30.1868L34.8063 29.0024C37.8692 25.8325 42.8238 25.3249 46.1682 28.1676C49.9855 31.439 50.1882 37.3049 46.765 40.847L34.9865 53.0188C34.6149 53.4023 34.1419 53.5941 33.6577 53.6053V67.018C33.7478 67.018 33.8379 67.0292 33.928 67.0292C52.4065 67.0292 67.3831 52.0261 67.3831 33.5146C67.3831 15.0032 52.4065 0 33.928 0Z"
            fill="#EEE6CD" />
          <path
            d="M32.2277 53.0188L20.4492 40.8357C17.026 37.2936 17.2287 31.4277 21.0572 28.1563C24.3904 25.3136 29.3563 25.8213 32.4191 28.9911L33.6128 30.232L33.7254 30.1192V0.0112806C33.6353 0.0112806 33.5452 0 33.4551 0C14.9765 0 0 15.0032 0 33.5146C0 52.0261 14.9765 67.0292 33.4551 67.0292C33.5452 67.0292 33.6353 67.018 33.7254 67.018V53.5941C33.1849 53.6392 32.6444 53.4474 32.2277 53.0188Z"
            fill="#D39094" />
          <path
            d="M22.431 21.0722C23.7121 21.0722 24.7507 20.0318 24.7507 18.7484C24.7507 17.465 23.7121 16.4246 22.431 16.4246C21.1499 16.4246 20.1113 17.465 20.1113 18.7484C20.1113 20.0318 21.1499 21.0722 22.431 21.0722Z"
            fill="#EEE6CD" />
          <path
            d="M44.952 21.0722C46.2331 21.0722 47.2717 20.0318 47.2717 18.7484C47.2717 17.465 46.2331 16.4246 44.952 16.4246C43.6709 16.4246 42.6323 17.465 42.6323 18.7484C42.6323 20.0318 43.6709 21.0722 44.952 21.0722Z"
            fill="#D39094" />
          <path
            d="M259.229 64.7391C263.429 68.2925 267.359 67.1419 268.226 61.7949C269.015 57.0119 269.116 52.0936 269.274 47.2204C269.443 42.1103 269.307 37.0002 269.307 31.9578C268.08 31.3261 266.763 30.841 265.693 30.0288C265.141 29.6114 265.04 28.6074 264.736 27.8742C265.411 27.6373 266.064 27.2876 266.751 27.1861C267.573 27.062 268.44 27.1522 269.386 27.1522C269.668 25.1443 269.814 23.1476 270.231 21.2074C271.672 14.4616 276.807 10.5359 282.685 11.9799C284.397 12.3972 286.007 13.796 287.324 15.0933C288.349 16.1085 288.214 17.5412 286.57 18.4436C285.703 17.9247 284.847 17.2817 283.879 16.8531C280.129 15.1497 276.998 16.4808 275.895 20.429C275.298 22.561 275.152 24.8059 274.758 27.344C277.618 27.141 280.129 26.9717 282.629 26.8025C283.012 30.7169 282.505 31.3148 278.834 31.484C277.595 31.5404 276.368 31.6532 274.87 31.7547C274.87 32.6572 274.893 33.4806 274.87 34.3041C274.566 42.821 274.476 51.3491 273.812 59.8321C273.598 62.5169 272.325 65.416 270.749 67.6495C268.114 71.3496 262.821 71.9474 259.533 69.4996C257.585 68.0444 257.416 66.341 259.229 64.7391Z"
            fill="#423738" />
          <path
            d="M171.183 49.42C171.836 51.7777 170.957 53.481 168.807 54.2481C165.721 55.3423 163.863 53.8307 161.499 48.2468C160.8 49.2734 160.192 50.3225 159.449 51.2588C157.197 54.1128 154.168 55.1167 150.756 54.1692C147.31 53.2103 145.632 50.4466 145.351 47.0511C145.137 44.4453 145.396 41.7944 145.486 39.166C145.531 37.7785 145.745 36.3797 145.779 34.9922C145.869 31.3485 145.317 30.9086 141.612 31.3711C141.173 31.4275 140.385 31.2132 140.284 30.9312C140.092 30.4348 140.115 29.6903 140.363 29.2052C141.218 27.5244 145.171 25.9677 147.344 26.4302C149.72 26.9265 151.015 28.5735 151.094 30.8635C151.195 33.8641 150.914 36.876 150.835 39.8879C150.779 41.9748 150.52 44.1069 150.857 46.1261C151.049 47.2767 152.107 48.8786 153.087 49.1606C154.247 49.499 156.105 49.0252 157.062 48.213C159.551 46.0923 160.823 43.1819 161.026 39.8541C161.228 36.4586 161.251 33.0293 161.724 29.6677C161.881 28.5171 162.94 27.0393 163.976 26.5543C166.093 25.5616 168.221 27.4003 167.94 29.8031C167.692 32.0254 167.061 34.2025 166.769 36.4135C166.374 39.3803 165.924 42.3697 165.89 45.359C165.879 49.3523 167.14 50.221 171.183 49.42Z"
            fill="#423637" />
          <path
            d="M98.3834 32.7926C100.095 29.273 101.649 25.7761 103.484 22.437C104.475 20.6321 105.759 18.8949 107.234 17.4623C110.117 14.6421 113.191 15.6799 114.272 19.7861C109.205 21.4443 106.559 25.5617 103.957 29.8484C101.018 34.6764 99.2505 39.6399 100.219 45.4043C100.534 47.2769 100.399 49.2735 100.151 51.1799C99.9036 53.0751 98.8225 54.4626 96.6267 54.4513C94.4422 54.44 93.4625 53.2668 93.744 51.0559C94.0143 48.9013 94.2057 46.7467 94.4872 44.6034C95.0052 40.7228 94.4084 37.0679 92.4378 33.6612C90.3096 29.995 88.3164 26.2273 85.9742 22.6965C84.3189 20.2035 82.9677 20.0455 80.1976 21.1961C78.7675 19.662 79.5783 18.4324 80.7268 17.2479C82.3596 15.5559 86.8188 15.3415 88.643 17.2705C90.8501 19.5943 92.8657 22.1663 94.5661 24.8849C96.0975 27.3328 97.1222 30.1191 98.3834 32.7926Z"
            fill="#423738" />
          <path
            d="M124.486 26.1597C130.634 26.1709 133.877 28.3706 136.028 32.206C139.282 38.0043 137.874 46.5098 133.089 51.0897C127.154 56.7639 116.344 55.4553 113.585 45.9684C112.043 40.689 112.853 35.6692 116.153 31.2134C118.574 27.9307 121.828 26.0807 124.486 26.1597ZM132.244 40.2378C131.715 37.9704 131.445 36.2107 130.882 34.5524C130.127 32.3301 128.46 30.9313 126.096 30.717C123.618 30.4914 121.715 31.6533 120.556 33.8079C118.382 37.8463 118.123 42.054 119.767 46.3293C120.589 48.4614 122.256 49.7022 124.519 49.894C126.76 50.0858 128.821 49.2623 129.8 47.2318C130.915 44.9193 131.523 42.3698 132.244 40.2378Z"
            fill="#423637" />
          <path
            d="M227.373 41.5123C227.362 44.152 228.094 46.6563 230.65 48.292C233.713 50.2548 238.465 49.8487 242.845 47.288C244.388 49.138 243.093 50.503 241.888 51.5746C238.543 54.5527 234.535 55.0942 230.335 54.0338C224.974 52.6688 221.889 48.4499 221.371 42.1102C220.718 34.1461 226.506 26.8701 234.05 26.1482C239.275 25.6518 243.262 28.8217 243.566 33.74C243.87 38.6132 240.041 42.6968 234.918 42.6178C232.485 42.584 230.064 41.9297 227.373 41.5123ZM227.553 38.5117C229.76 38.6583 231.888 38.9178 234.005 38.8952C236.122 38.8727 237.721 37.801 238.341 35.6803C238.893 33.7964 238.453 32.1269 236.753 30.9875C234.918 29.758 233.026 30.0513 231.325 31.2357C228.961 32.8714 227.846 35.2629 227.553 38.5117Z"
            fill="#433738" />
          <path
            d="M200.629 44.0394C202.566 48.5516 205.291 50.5596 209.244 50.4355C210.01 50.4129 210.933 50.4129 211.485 49.9955C212.352 49.3526 213.444 48.4163 213.545 47.5138C213.635 46.6339 212.813 45.2577 211.991 44.7726C210.359 43.8025 208.478 43.2498 206.654 42.618C200.832 40.6214 198.535 36.6506 200.494 31.924C202.532 27.0283 209.165 24.2984 213.725 26.7801C215.009 27.4795 216.124 29.1829 216.518 30.6381C216.935 32.1835 215.583 33.2552 213.872 33.6613C212.543 30.8637 210.28 29.5213 207.296 30.2771C206.181 30.5591 204.83 31.8112 204.548 32.8829C204.345 33.6387 205.573 35.1616 206.53 35.7256C208.309 36.7747 210.37 37.3275 212.284 38.1509C215.291 39.4256 217.768 41.2193 217.824 44.8742C217.881 48.5178 216.192 51.259 213.072 53.0977C208.793 55.6358 201.879 54.8575 199.042 51.5635C196.519 48.6306 197.049 45.9458 200.629 44.0394Z"
            fill="#433839" />
          <path
            d="M262.551 48.1343C263.824 49.8038 263.238 51.18 262.157 52.4209C259.263 55.7261 253.351 55.038 251.64 50.9995C250.694 48.7885 250.198 46.2504 250.086 43.8364C249.647 34.214 250.412 24.6594 252.642 15.2739C252.946 13.9992 254.252 12.1153 255.209 12.0589C256.482 11.9687 258.182 13.1193 259.083 14.2361C259.736 15.0483 259.578 16.6953 259.41 17.9136C259.241 19.098 258.711 20.2825 258.16 21.3654C256.527 24.5917 255.66 27.9871 255.682 31.6195C255.716 36.2558 255.446 40.9147 255.817 45.5172C256.167 49.8376 257.799 50.4693 261.729 48.4388C261.921 48.326 262.146 48.2809 262.551 48.1343Z"
            fill="#423637" />
          <path
            d="M183.063 34.2365C184.436 32.127 185.54 30.1078 186.959 28.3368C188.321 26.6334 190.202 25.6971 192.51 26.2837C194.65 26.8364 196.102 29.1941 195.325 31.1005C194.751 32.5331 194.12 33.9883 191.947 32.7136C190.078 31.6307 188.321 32.4429 187.015 34.0334C183.941 37.7786 182.882 42.0765 183.704 46.8369C183.885 47.8973 184.155 48.9577 184.279 50.0293C184.504 51.9357 183.164 54.0001 181.542 54.3385C179.82 54.7108 178.176 53.6391 177.995 51.2927C177.725 47.9311 178.029 44.5357 178.052 41.1515C178.074 38.5344 178.119 35.906 178.018 33.2889C177.939 31.2471 176.723 30.717 174.809 31.1569C174.189 31.3035 173.469 30.9877 172.793 30.8862C172.973 30.1078 172.939 29.1828 173.367 28.5736C174.651 26.78 177.421 25.8889 179.392 26.498C181.734 27.22 182.545 29.0361 182.714 31.2923C182.815 32.2398 182.939 33.1536 183.063 34.2365Z"
            fill="#443839" />
        </svg>
        <div>

          <form class="form-group">

            <div class="signin">
              <p>メールアドレス</p>
              <input type="email" class="email" id="mailaddress" required>

              <p>パスワード ※8文字以上</p>
              <input type="password" class="password" id="password" minlength="8" required>
            </div>

            <!-- <div class="button">
              <button class="login" id="login"　>ログイン</button>
              <button class="register" id="register">新規登録</button> -->

            <div class="button">
              <input type="button" class="register" value="新規登録" onclick="signUp()" />
              <input type="button" class="login" value="ログイン" onclick="signIn()" />
              <input type="button" class="register" value="ログアウト" onclick="signOut()" />
              <p id="log"></p>
              <p id="state"></p>
            </div>

            <!-- このファイルに認証用の処理を実装します。
            <script src="firebase-auth.js"></script> -->

            <div id="firebaseui-auth-container"></div>

        </div>

        </form>

    </main>

  </div>

  <script>

    //----------------------------------------------
    // Firebase UIの設定
    //----------------------------------------------

    // メールアドレス認証    新規アカウント作成
    function signUp() {
      var email = document.getElementById('mailaddress').value;
      var password = document.getElementById('password').value;

      firebase.auth().createUserWithEmailAndPassword(email, password)
        .then(function (result) {
          console.log(result);
          location.href = '/home.html'
          document.getElementById('log').innerText = 'サインアップ成功';
        }).catch(function (error) {
          console.log('signup error')
          var errorCode = error.code;
          var errorMessage = error.message;
          document.getElementById('log').innerText = 'サインアップ失敗: ' + errorCode + ', ' + errorMessage;
        });
    }


    // メールアドレス認証    ログイン
    // $(function () {
    // $('#login').on('click', function () {
    //   var email = $('#mailaddress').val();
    //   var pass = $('#password').val();
    //   console.log(email);
    //   firebase.auth().signInWithEmailAndPassword(email, pass)
    //     .then(user => {
    //       // ログイン成功
    //       var user = firebase.auth().currentUser;
    //       // ページを移動する、ユーザーの情報を取得して処理を行う、等する
    //       location.href = '/toppage.html';
    //       // user.uid をユーザーIDとして使用する
    //     }, err => {
    //       // エラーを表示する等
    //       alert('ログインできません')
    //     });
    // });
    // });

    // ログイン
    function signIn() {
      var email = document.getElementById('mailaddress').value;
      var password = document.getElementById('password').value;

      firebase.auth().signInWithEmailAndPassword(email, password)
        .then(function (result) {
          location.href = '/home.html'
          document.getElementById('log').innerText = 'サインイン成功';
        }).catch(function (error) {
          var errorCode = error.code;
          var errorMessage = error.message;
          document.getElementById('log').innerText = 'サインイン失敗: ' + errorCode + ', ' + errorMessage;
        });
    }



    // Googleアカウント認証
    var uiConfig = {
      // ログイン完了時のリダイレクト先
      signInSuccessUrl: '/home.html',

      credentialHelper: firebaseui.auth.CredentialHelper.NONE,

      // 利用する認証機能
      signInOptions: [
        firebase.auth.GoogleAuthProvider.PROVIDER_ID,
        firebase.auth.EmailAuthProvider.PROVIDER_ID  //メール認証
      ],


      // 利用規約のURL(任意で設定)
      // tosUrl: 'http://example.com/kiyaku/',
      // プライバシーポリシーのURL(任意で設定)
      // privacyPolicyUrl: 'https://privacy.html'


    };
    var ui = new firebaseui.auth.AuthUI(firebase.auth());
    ui.start('#firebaseui-auth-container', uiConfig);
    // });

    // ユーザー情報取得
    //   this.userId = firebase.auth().currentUser.uid
    //   firebase.firestore().collection('/users').doc(user.uid).set({
    //     // db.collection('users').doc(user.uid).set({
    //     uid: user.uid,
    //     // created: getNowDatetime(),
    //   }).catch(function (error) {
    //     console.log("Error writing document: ", error);
    //   });
    // });
    // });

    // firebase.auth().onAuthStateChanged((user) => {
    //   firebase.firestore().collection('/users').doc(user.uid).set({
    //     uid: user.uid,
    //   }).catch(function (error) {
    //     console.error("Error writing document: ", error);
    //   });
    // });

    // ユーザー情報取得

    // firebase.auth().onAuthStateChanged((user) => {
    //   firebase.firestore().collection('/users').doc(user.uid).set({
    //     // db.collection('users').doc(user.uid).set({
    //     uid: user.uid,
    //     // created: getNowDatetime(),
    //   }).catch(function (error) {
    //     console.error("Error writing document: ", error);
    //   });
    // });


    // 日時を取得する関数
    function getNowDatetime() {
      const date = new Date();
      const year = date.getFullYear();
      const month = ('0' + (date.getMonth() + 1)).slice(-2);
      const day = ('0' + date.getDate()).slice(-2);
      const hour = ('0' + date.getHours()).slice(-2);
      const min = ('0' + date.getMinutes()).slice(-2);
      const sec = ('0' + date.getSeconds()).slice(-2);
      return `${year}-${month}-${day}T${hour}:${min}:${sec}`
    }


    // uidをfirestoreに格納
    // firebase.auth().onAuthStateChanged((user) => {
    //   // console.log(user)
    //   firebase.firestore().collection('/users').doc(user.uid).set({
    //     uid: user.uid,
    //     //   .then(function () {
    //     //     console.log("Document successfully written!");
    //   })
    //     .catch(function (error) {
    //       console.error("Error writing document: ", error);
    // });


    // ログイン確認
    firebase.auth().onAuthStateChanged(function (user) {
      if (user) {
        // ログイン認証済
        console.log('auth user', user);
        document.getElementById('state').innerText = 'ログイン済(email: ' + user.email + ')';
      } else {
        // No user is signed in.
        document.getElementById('state').innerText = '未ログイン';
      }
    });


    // ログアウト
    function signOut() {
      firebase.auth().signOut().then(function () {
        document.getElementById('log').innerText = 'サインアウト成功';
      }).catch(function (error) {
        console.log(error);
        document.getElementById('log').innerText = 'サインアウト失敗';
      });
    }


    // });

  </script>

</body>

</html>